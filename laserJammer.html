<!DOCTYPE html>
<html>

<head> 
<meta charset="utf-8">
<title>Portfolio | Jacky Wang</title>

<style>
a:link, a:visited {
  background-color: black;
  color: white;
  padding: 15px 25px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
}

a:hover, a:active {
  background-color: red;
}
p.cap{
    impact;font-size:15px;
}
html {
  scroll-behavior: smooth;
}
table, th, td {
  border: none;
  border-radius: 10px;

  color:white;
}
/*image alignment*/
.row {
  display: flex;
}

.column {
  flex: 50%;
  padding: 5px;
}

/* Slideshow container */
.slideshow-container {
  max-width: 1000px;
  position: relative;
  margin: auto;
}

/* Next & previous buttons */
.prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}

/* Position the "next button" to the right */
.next {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8);
}

/* Caption text */
.text {
  color: #f2f2f2;
  font-size: 15px;
  padding: 8px 12px;
  position: absolute;
  bottom: 8px;
  width: 100%;
  text-align: center;
}

/* Number text (1/3 etc) */
.numbertext {
  color: #f2f2f2;
  font-size: 12px;
  padding: 8px 12px;
  position: absolute;
  top: 0;
}

/* The dots/bullets/indicators */
.dot {
  cursor: pointer;
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;
}

.active, .dot:hover {
  background-color: #717171;
}

/* Fading animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.5s;
  animation-name: fade;
  animation-duration: 1.5s;
}

@-webkit-keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

@keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

/* On smaller screens, decrease text size */
@media only screen and (max-width: 300px) {
  .prev, .next,.text {font-size: 11px}
}
</style>
</head>

<body style="font-family:verdana;color:white;background-color:black"> 
<table width=100%>
<!--Header with logo-->
<tr bgcolor="black"><td colspan="5"> 
<center>
	<table width=100% >
		<tr height=100%>
			<td  align="center" style="font-family:impact;font-size:30px"width=50% height=100%> <center>Jacky Wang | Portfolio </center></td>
			<td align="center" style="font-family:impact;color:white;background-color:black;font-size:25px" width="300"> <a href= "./index.html#aboutme"><hr><center>About Me</center> </a> </td>
			<td align="center" style="font-family:impact;color:white;background-color:black;font-size:25px" width="300"> <a href= "./index.html#project"><hr><center>Projects</center> </td>
			<td align="center" style="font-family:impact;color:white;background-color:black;font-size:25px" width="300"> <a href= "./index.html#music"> <hr><center>Music</center></td>
		</tr>

	</table>
</center>
</div>

</div>

<hr> </td>
<tr>
    <td rowspan ="6" bgcolor="black"><center></center></td> <!--Left-->
    <td align="center"></td>
    <td rowspan ="6" bgcolor="black"><center></center></td> <!--Right-->
    <!-- spacing between titles and content -->

    <tr>
    	<td height="100" style="font-family:impact;font-size:30px;background-color:black;"width =85%><center>The Laser Jammer</center></td>
    </tr>
    <tr style="background-color:#3C3C3C">
    	<td height="100" style="font-family:Georgia;font-size:20px;">
            <p style="font-family:Georgia;font-size:30px;">
                <center><b> Introduction </b></center></p>
                <p> 
                    The Lasser Jammer is a MIDI instrument that allows musicians to trigger music notes with laser strings.
                </p>
                <p style="font-family:Georgia;font-size:23px;"><b>People</b><p>
                    <p><b>Jacky Wang:</b> Tufts University, Electrical Engineering, 2022</p>
                    <p><b>Bailey Halbreich:</b> Tufts University, Mechanical Engineering, 2022</p>
                    <p><b>Rachel Brennan:</b> Tufts University, Mechanical Engineering, 2023</p>
                    <p><b>Chalotte Nanteza:</b> Tufts University, Music, 2022</p>
                <p>There are two versions<p/>
                <p><a href= "./laserJammer.html#V1.0"><b>V 1.0 (Released on Nov.16, 2021)</a></b></p>
                <center><img src="img/laserJammer.jpg" height="400" width="400"></center>
                <p>The idea is to create a briefcase-like device that, when unfolded, allows the user easy access to three separate instruments at once. On each side, there will be six pairs of lasers and photocells, along with six linear soft pots underneath. Total 12 sets of lasers, photocells, and soft pots each represents a note in traditional western major scale. The soft pots are used to fade between two different instrument sounds, while blocking the lasers from the photocells can trigger the sounds.</p>
                <p><a href= "./laserJammer.html#V2.0"><b>V 2.0 (Releasing on Dec.20, 2021)</a></b></p>
                <center><img src="img/laserJammer2.jpg" height="400" width="400"></center>
                <p>This design builds on the concept of the previous project. However, this time we focused on the functionality and usability of the instrument instead of the physical portability. The design carries on the idea of using lasers and photocell to trigger music notes but added more controls for the timbre and effects. Three rotary knobs are added for distortion, delay, and reverb control. A slider is added for master volume control.
                </p>
                <p>Instead of having 12 laser strings, the instrument only has 6 installed on its right side horizontally. On the left side of the instrument, there are 6 linear soft pots each controlling one of the strings. The soft pots are installed vertically for ergonomic purposes. These soft pots act like a fretboard on a guitar. When different position of the soft pot is pressed, the note that corresponding string sends out is different. Our design grants 2-octave pitch bend when moves from one end of a soft pot to another.
                </p>
                <p>There are also two buttons added for octave shifting. 
                </p>
        </td>
    </tr>
    
    <tr style="background-color:#3C3C3C">
        <td height="100" id="V1.0"style="font-family:Georgia;font-size:20px;">
            <p style="font-family:verdana;font-size:40px;"><center><b> V1.0 </b></center></p>
            
            <p><b>Construction</b></p>
            <p>
                The construction started with 3-D modelling of the entire structure using SolidWorks. Then, the materials for each part were decided based on the shape and how easy they were to be processed differently. For example, the frames of the instrument were made of acrylic and processed using laser cutting because they are flat; while the laser and photocell holders were 3D-printed because they have more complex shapes. The mechanical design and construction were mostly done by Bailey.
            </p>
            <p><b>Circuitry</b></p>
            <center><img src="./img/laserJamCc.png" height="400" width="800"><p class="cap"><b>Figure 1.1</b> Overall schematics</p></center>
            <p>
                There are two separated circuit systems in this instrument.
            </p>
            <p>
                The first one is the lasers. Since the lasers consume much higher power than the sensors, we decided to power them separately. This circuit is very straight forward—just a resistor in series with a laser LED. The use of the resistors was to limit the current passing through the laser in the rated range.
            </p>
            <p>
                The second part is the sensors. We divided all the sensors into 12 sets, with each set consisting of a soft pot, a photocell, and two 1k resistors. Figure 2 shows the schematics of a sensor set.
            </p>
            <center><img src="./img/laserJamSs.png" height="300" width="200"><p class="cap"><b>Figure 1.2</b> Sensor set schematics</p></center>
            <p>
                As shown in Figure 1.2, there is a 1k resistor connected in series between the soft pot and 5V with an Arduino’s analog pin reading the voltage drop at the soft pot. This design was based on range of resistance and Arduino’s reading range. For the photocell, it sits between 5V and a 1k resistor. An Arduino digital pin reads the voltage drop of the resistor. This is because the resistance of the photocell drops when it sees light which would increase the voltage at the digital pin. This way the Arduino would read a digital “1” when there’s light shining onto the photocell.
            </p>
            <p>
                All circuits were realized by soldering parts and jump wires on solderable bread boards. Due to the limited amount of time, the wiring was a messy and the wires were all over the place which obviously causes noise. Fortunately, the circuits and sensors seemed to be fully functional.
            </p>
            <p><b>Functionality of the Max patch</b></p>
            <p>
                The Max patch uses the Arduino2Max block to perceive sensor data read by the Arduino to Max. The Arduino writes the data of each pin into a sentence in the order of “A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 A10 A11 D22 D23 D24…D33” and sends the sentence to Serial every 15ms. The Arduino2Max block would then be able to parse this sentence into individual numbers and assign the numbers to their corresponding pins.
            </p>
            <p>
                Each digital pin triggers a “select” block to send a specific number to a “noteon” block. Our design has 12 photocells corresponding to 12 digital values, which triggers C4, C#4 D4…A#4 B4. The velocity of all notes was set to be a constant 40.
            </p>
            <p>
                Each soft pot controls a rotary knob of a Reason combinator. The Arduino’s digital pins are 10-bit and are capable of reading values from 0-1024. However, during testing we found out that our reading only has range of about 200 while each soft pot has different range. Therefore, each analog reading was mapped to 0-127 using a “scale” block and was calibrated separately.
            </p>
            <p><b>The Reason rack</b></p>
            <p>
                In Reason, there are 12 sets of identical subsystems. Each subsystem represents a string and is triggered by different MIDI channels. Each subsystem consists of a subtractor, a Thor, and a combinator. The subtractor and Thor represent different instrument sounds and are combined by the combinator. A rotary knob on the combinator can decrease the volume level of one while increasing that of the other. This way, we were able to fade between the sounds of two different instruments.
            </p>
            <p>
                The Reason racks were designed a made mostly by Charlotte.
            </p>
            <p><b>What could have been done differently and future work</b></p>
            <p>
                Better time manage was necessary. The project was given 2 weeks of work time, but the team only started to be productive in the last 5 days. A lot of problems were detected (for examples, messy wires) but the team didn’t have time to debug, iterate, and reconstruct.
            </p>
            <p>
                The triggering logic of string could be improved. Right now, a note is sent when the user’s finger blocks the laser light from the photocell (pressing/plucking the string) and the Arduino reads a “0”. However, this means multiple notes would be triggered if the finger stays between the laser and the photocell for longer time. This can be solved by building more complex Max patch. Also, the velocity of a note can be determined by a laser was blocked.
            </p>
            <p>
                The sounds that this instrument can make is very inflexible. The only thing was fading between two different instrument sounds, while those sounds were constant. Maybe more knobs/analog sensors could be added to our instrument to adjust parameters of Reason devices to make more customizable sounds.
            </p>
            <p>
                The overall ergonomic structure of the instrument could be improved. First, not all 12 strings were necessary on the instrument. We can use 6 strings and use the soft pots as bend wheels to mimic a guitar. Also, the horizontal orientation of the strings and soft pots is not very user-friendly. We can probably have the strings on only one door while having the soft pots oriented vertically on the other door. This should make the instrument more playable.
            </p>
            
    </tr>
    
    <tr style="background-color:#3C3C3C">
        <td height="100" id="V2.0"style="font-family:Georgia;font-size:20px;">
            <p style="font-family:verdana;font-size:30px;"><center><b> V2.0 </b></center></p>
            
            <div class="slideshow-container">

            <div class="mySlides fade">
              <div class="numbertext">1 / 3</div>
              <center><img src="./img/laserJam2_0.jpg" style="height:500px; width:auto"></center>
            </div>

            <div class="mySlides fade">
              <div class="numbertext">2 / 3</div>
              <center><img src="./img/laserJam2_2.jpg" style="height:500px; width:auto"></center>
            </div>

            <div class="mySlides fade">
              <div class="numbertext">3 / 3</div>
              <center><img src="./img/laserJam2_3.jpg" style="height:500px; width:auto"></center>
            </div>

            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>

            </div>
            <br>

            <div style="text-align:center">
              <span class="dot" onclick="currentSlide(1)"></span> 
              <span class="dot" onclick="currentSlide(2)"></span> 
              <span class="dot" onclick="currentSlide(3)"></span> 
            </div>

            <script>
            var slideIndex = 1;
            showSlides(slideIndex);

            function plusSlides(n) {
              showSlides(slideIndex += n);
            }

            function currentSlide(n) {
              showSlides(slideIndex = n);
            }

            function showSlides(n) {
              var i;
              var slides = document.getElementsByClassName("mySlides");
              var dots = document.getElementsByClassName("dot");
              if (n > slides.length) {slideIndex = 1}    
              if (n < 1) {slideIndex = slides.length}
              for (i = 0; i < slides.length; i++) {
                  slides[i].style.display = "none";  
              }
              for (i = 0; i < dots.length; i++) {
                  dots[i].className = dots[i].className.replace(" active", "");
              }
              slides[slideIndex-1].style.display = "block";  
              dots[slideIndex-1].className += " active";
            }
            </script>

            <p><b>Construction</b></p>
            <p>
                The construction started with 3-D modelling of the entire structure using SolidWorks. Then, the materials for each part were decided based on the shape and how easy they were to be processed differently.
            </p>
            <p>
                The laser holder on the right end and the supporting structure at the middle spin were both 3-D printed. However, the roof of the spin is made with acrylic board for easier  marking for the knobs, slider, and buttons. 
            </p>
            <p>
                The rest of the instrument are all made with acrylic board and glued with super glue.
            </p>
            <p>
                Most of the mechanical design and construction were done by Bailey.
            </p>
            <p><b>Circuitry</b></p>
            <center><img src="./img/laserJam2Cs.png" height="400" width="800"><p class="cap"><b>Figure 2.1</b> Overall schematics</p></center>
            <p>
                The schematics of the circuits of the instrument is shown in Figure 2.1. In general, there are 6 laser and 18 sensors used. The entire system is powered by the Arduino without any external power supply.
            </p>
            <center><div class="row">
              <div class="column">
                <img src="./img/laserJam2sp.png" height="366" width="264"><p class="cap"><b>Figure 2.2</b> Soft-pot and photocell connection</p>
              </div>
              <div class="column">
                <img src="./img/laserJam2rp.png" height="366" width="264"><p class="cap"><b>Figure 2.3</b> Rotary pot connection</p>
              </div>
            </div></center>
            <p>
                As shown in Figure 2.2, there is a 1k resistor connected in series between the soft pot and 5V with an Arduino’s analog pin reading the voltage drop at the soft pot. This design was based on range of resistance and Arduino’s reading range. For the photocell, it sits between 5V and a 1k resistor. An Arduino digital pin reads the voltage drop of the resistor. This is because the resistance of the photocell drops when it sees light which would increase the voltage at the digital pin. This way the Arduino would read a digital “1” when there’s light shining onto the photocell.
            </p>
            <p>
                The connection for rotary potentiometers is shown in Figure 4. The pins on the sides of each potentiometer go directly to 5V supply and ground while the middle pin is connected to an Arduino’s digital pin. The setup for does not require additional resistor as the potentiometer itself is a voltage divider. These potentiometers provide incredibly stable reading with this setup.
            </p>
            <center><div class="row">
              <div class="column">
                <img src="./img/laserJam2lp.png" height="198" width="447"><p class="cap"><b>Figure 2.3</b> Linear potentiometer connection</p>
              </div>
              <div class="column">
                <img src="./img/laserJam2b.png" height="198" width="447"><p class="cap"><b>Figure 2.4</b> Button connection</p>
              </div>
            </div></center>
            <p>
                The circuit connection for the linear potentiometer(slider) is shown in Figure 5. The logic is really similar to that of the soft-pots—a resistor is connected in series with the potentiometer and the Arduino reads the voltage between them. Since our linear potentiometer ranges from 0-100kΩ, the resistor in series with it needs to be similar-resistance to it. In this case, we picked a 83kΩ resistor.
            </p>
            <p>
                The connection for the button/switch is shown in Figure 6. The idea is straight forward—when the switch is open, the circuit is broken therefore the Arduino reads 0; when the switch is close, the circuit is shorted and the Arduino reads 1. A 10k current-limiting resistor is added for protection.
            </p>
            <p><b>Functionality of the Max patch</b></p>
            <center><img src="./img/laserJam2Max.png" height="400" width="800"><p class="cap"><b>Figure 2.5</b> Screenshot of the Max patch</p></center>
            <p>
                The Max patch uses the Arduino2Max block to perceive sensor data read by the Arduino to Max. The Arduino writes the data of each pin into a sentence in the order of “A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 D30 D31 D32…D37” and sends the sentence to Serial every 15ms. The Arduino2Max block would then be able to parse this sentence into individual numbers and assign the numbers to their corresponding pins.
            </p>
            <p>
                The first 6 analog pins and digital pins control the channels of the 6 strings. The digital pins’ reading changes from “0” to “1” when a string is interrupted, and changes from “1” to “0” when the interruption is released. A “togedge” object in Max reads these changes and a “timer” object is used to measure the time difference between interruption and release. This time measurement is used for determining the velocity of the MIDI note. Our design has 6 strings corresponding to 6 note values, which triggers E2, A2, D3, G3, B3, and E4 by default (without touching the soft pots). The velocity and note number for each string is sent to 6 different MIDI channel. The analog pins correspond to pitch bend for the 6 strings, mimicking the fretboard of a guitar. The read value is sent with control number 1, which controls the pitch bend on a Reason NN19.
            </p>
            <p>
                The analog pin A6 controls the master volume of the Reason’s master mixer.
            </p>
            <p>
                The analog pin A7, A8, and A9 represent three rotary knobs on the instrument. A7 is mapped to control damage on a Reason Scream 4, with control number 8. A8 is mapped to control dry/wet of a Reason DDL-1 digital delay line, with control number 7. A9 is mapped to control dry/wet of a Reason RV-7 digital reverb, with control number 9.
            </p>
            <p>
                Two additional digital pins, D36 and D37, controls the octaves. In Max, a variable “oct” is created. D36 triggers a “+1” action and D37 triggers a “-1” action on “oct”. For now, we connect “oct” to six “ctrlout” objects in Max, each sends the value of “oct” via control number 21 (octave control in NN19) to each string’s channel. However, we later realized that this approach is problematic as by default not all strings use the same octave. Therefore, the future plan is to have a unique “oct” variable for each string that controls the octave of each channel independently. 
            </p>
            <p><b>The Reason rack</b></p>
            <center><img src="./img/laserJam2R.png" ><p class="cap"><b>Figure 2.6</b> Screenshot of the Reason rack</p></center>
            <p>
                In Reason, there are six identical NN19 modules each represents a string on the physical instrument. Each NN19 is set to initial octave of the string it represents. All six NN19 modules are plugged into a mixer. A Scream 4 for distortion effect, DDL-1 for delay effect, and RV-7 for reverb effect, are plugged to the mixer’s aux channels to apply effects for the whole system.
            </p>
            <p>
                MIDI channel 1-6 are connected to the six NN19 modules, channel 7 is connected to the DDL-1 digital delay, channel 8 is connected to the Scream 4, channel 9 is connected to the RV-7 digital reverb, and channel 10 is connected to the mixer for volume control.
            </p>
            
            <p><b>Current progress and future work</b></p>
            <p>
                Due to the outbreak of Covid-19 Omicron variance, Tufts Univeristy closed thier campus on 12/17/2021, suspending all ongoing projects that require the use of labs. The team met and worked the last in the lab on the last day of school. We finished soldering all electronics and connected everything up. However, there seems to be some issue at a section of the solderable breadboard where the soft pots were soldered at. When using the Arduino to read soft pots’ values, values for all soft pots changed with only one soft pot being pressed. Apparently, since all the soft pots were soldered closely together, there must have been shorted wires/solders.
            </p>
            <p>
                The alignment of the lasers and the photocells was not perfect because of the bad tolerance of 3D-printed parts. This can be fixed by gluing the lasers to their correct positions. 
            </p>
            <p>
                Other than that, the slider, knobs, and buttons functioned perfectly. The Max and Reason patches functions as expected as well. In general, the project is very close to be completed. If given a few days, a fully functional instrument could be presented.
            </p>
            <p>
                The team is planning to complete the project in Spring 2022.
            </p>
    </tr>
    
    <tr><td style="background-color:#3C3C3C"><center>
        <p><b>Demostration Video</b>
        </p>
        <table width=100%>
    	<tr>
    	<td height="450" width=%30 style="background-color:#3C3C3C;">
    		<center>
                <video width="320" height="240" controls> 
                <source src="./vid/laserJam1.mp4" type="video/mp4">
                </video>
    		<p>
    			The Laser Jammer 1.0
    		</p>
    		</center>
    	</td>
    	<td width=%5 ></td>
    	<td height="450" width=%30 style="background-color:#3C3C3C;">
    		<center>
                <video width="320" height="240" controls> 
                <source src="./vid/laserJam2.mp4" type="video/mp4">
                </video>
    		<p>
    			The Laser Jammer 2.0 (Coming Soon)
    		</p>
    		</center>
    	</td>
    	</tr>
    	</table>
        
        
        
    </center></td></tr>  
</tr>

<!-- footer -->
<tr> <td colspan="7"style="font-family:Georgia;color:white;background-color:black"> <hr><center>By Jacky Wang | 2022</center> </td>
</tr>
</table>




</body>
</html>